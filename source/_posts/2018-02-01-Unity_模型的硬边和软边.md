---
title: Unity_模型的“硬边”和“软边”
abbrlink: 29d616c0
date: 2018-02-01 00:39:35
tags: 
  - unity
  - 模型
categories:
  - unity
comments:
---

Unity_模型的“硬边”和“软边”
<!-- more -->
## 先看下面两张图  

![理想图](/../../Photos/SoftOrHardSide/理想.PNG)
![实际图](/../../Photos/SoftOrHardSide/硬边.PNG)

第一张是“软边”的效果，第二张是“硬边”的效果  
曾经做项目的时候遇到过一次，美工做的模型，他那边看的是第一种效果，给我之后导入unity就成了第二种，我还以为是shader出了问题，浪费了好多时间。  
后来才知道上面模型的区别就是“硬边”和“软边”的问题。左图里就是软边的效果，软边意味着相邻三角形之间共用顶点，这些被共用顶点的法线（蓝线）通常是根据毗连三角形的面法线加权平均计算得到的，如下图所示  
![实际图](/../../Photos/SoftOrHardSide/图0.jpg)
由于共用顶点的存在，光栅化阶段的插值使得这些三角面片中间每个点的点法线都是有三个顶点的法线插值得到的，而这三个法线各不相同， 使得面片有平滑过渡的效果，从而形成软边。在其他风格的渲染中，模型大多都会使用软边，这不仅可以减少顶点数目提高性能，还能让渲染效果更加平滑。

## “硬边”常用于Low polygon风格的渲染也被称为flat shading

但flat shading显然不想要平滑的渲染效果，我们希望就算光栅化插值后同一个三角面片中每个点的法线都应该是相同的（都等于面法线），只有这样它们光照计算的结果才会是相同的。如下图所示
![实际图](/../../Photos/SoftOrHardSide/图片3.PNG)
要实现这样的效果就是把所有相连的边在建模软件中设置成硬边，Hard Edge。这样软件背后就会进行拆顶点的工作，每个三角形有各自属于自己的三个顶点，不与他人共用，这三个顶点的点法线计算不会受毗连三角形的影响，而仅仅是由该三角面片的面法线决定。 因此，我们有了解决
* 方案一：在建模软件中把边设置成硬边。
* 方案二：直接使用Unity，当你在建模软件里忘记了设置硬边，Unity也是可以直接帮我们做到软硬边的转换的。它的原理其实就是重新拆点、重新计算点法线  
![实际图](/../../Photos/SoftOrHardSide/图片4.PNG)  

在我们导入一个模型后，可以在模型的导入面板中的Normals & Tangents块中，把Normals设置成Calculate模式、把Smoothing Angle设置成0就可以得到硬边的效果。如上图所示。
>low polygon风格其实是一种复古风格，在早期的不支持插值渲染的年代，这种风格随处可见，因为模型简单、渲染也不复杂，在早期游戏中被大量使用。  
![实际图](/../../Photos/SoftOrHardSide/图片1.PNG) 