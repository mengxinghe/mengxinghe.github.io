---
title: Unity 2D游戏优化之——图集
tags:
  - Unity
  - 优化
  - 图集
categories:
  - Unity
abbrlink: 5239293d
date: 2018-06-17 16:48:30
comments:
---
## 什么是图集？
> 在使用3D技术开发2D游戏或制作UI时（即使用GPU绘制），都会使用到图集，而使用CPU渲染的2D游戏和UI则不存在图集这个概念（比如Flash的原生显示列表），那么什么是图集呢？<!-- more -->准确的说法图集是一张包含了多个小图的大图和一份记录了每个小图id、位置、尺寸等数据的数据文件，一个图集应该对应两个文件，当然也有人把数据集成到图片中，导致看起来只有一张图片（参考自DragonBones的做法）。
## 为什么要用图集？
> 在GPU已经成为PC、手机等设备的必备组件的现在，把所有显示的绘制操作交给专门处理图像的GPU显然比交给CPU更合适，这样空闲下来的CPU可以集中力量处理游戏的逻辑运算。  
而GPU处理图像的做法和CPU是不一样的，在GPU中，我们要绘制一个图像需要提交图片（即纹理）到显存，然后在进行绘制（这个过程称为一次DrawCall），那么如果我们一帧要绘制100个就需要提交100次图片，如果使用包含了这100图片的图集，只需要一次提交即可，即一次DrawCall就搞定，处理效率上会有很大的提升。  
另外使用图集也方便管理和归类各个模块的图片，可以通过一次加载和一次卸载完成多个图片的处理，同理，加载次数也下来了，可以提升运行效率。  

# Unity2D中的图集
其实用过NGUI的同学都知道在拼界面之前都必须先制作好对应的图集才行，然而在Unity2D或UGUI中，Unity却自己集成了图集的操作，目的是让我们忘掉图集的存在，更加关注设计这个层面。

## 如何使用图集
在Unity中我们只要使用小图片即可，可以通过设置图片的Packing Tag来指定小图会被打包到的图集，比如2个小图的Packing Tag都叫“MyAtlas”，则Unity会将这两个小图打包到名为“MyAtlas”的图集中。

注意图片不能放在Resources文件夹下面，Resources文件夹下的资源将不会被打入图集。

是否打包图集的控制选项：`Editor->Project Settings` 下面有`sprite packer`的模式。`Disabled`表示不打包图集，`Enabled For Builds` 表示只有打包应用的时候才会打包图集，`Always Enabled `表示始终会打包图集。

在`Windows->Sprite Packer` 里，点击`packer` 在这里你就可以预览到你的图集信息，图集文件被保存在和Assets文件夹同级的目录，`Libary/AtlasCache`里面。图集的大小还有图集的格式等等很多参数我们都是可以控制的，也可以通过脚本来设置。

通过设置我们就可以发现多个同一Packing Tag的小图放到场景中只会消耗一个DrawCall，表示我们的图集已经开始起作用了。
   

### 参考链接
https://blog.csdn.net/zhaoguanghui2012/article/details/53898392